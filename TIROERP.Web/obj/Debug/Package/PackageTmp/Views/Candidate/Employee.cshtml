@model TIROERP.Core.Model.Candidate
@{
    ViewBag.Title = "Employee";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Scripts.Render("~/bundles/wizard")
@Styles.Render("~/Content/wizard")
@*@Scripts.Render(("~/bundles/select2"))
    @Styles.Render("~/Content/select2")*@

@Scripts.Render(("~/bundles/datepicker"))
@Styles.Render("~/Content/datepicker")
<script src="~/Content/js/AttachmentUpload.js"></script>
<link href="~/Content/css/chosen/chosen.css" rel="stylesheet" />
<script src="~/Content/js/chosen/chosen.jquery.js"></script>

@using (Html.BeginForm(null, null, FormMethod.Post, new { @id = "formControl", @class = "form-horizontal", enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

     <!-- page content -->
    <div class="right_col" role="main">
        <div class="">
            <div class="page-title">
                <div class="title_left">
                    <h3>Employee</h3>
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <h2>Add Employee Details</h2>
                            <div class="clearfix"></div>
                        </div>


                        <div class="x_content">
                            @if (@ViewBag.RegNo != null)
                            {
                                string iserror = ViewBag.RegNo;
                                if (iserror.Contains("Error"))
                                {
                            <div class="alert alert-danger alert-dismissable">
                                <button type="button" class="close" data-dismiss="alert"
                                        aria-hidden="true">
                                    &times;
                                </button>
                                @ViewBag.RegNo
                            </div>
                                }
                                else
                                {
                            <div class="alert alert-success alert-dismissable">
                                <button type="button" class="close" data-dismiss="alert"
                                        aria-hidden="true">
                                    &times;
                                </button>
                                Success! Well done its submitted : @ViewBag.RegNo
                            </div>
                                }
                            }

                            <!-- Tabs -->
                            <br />

                            <!-- Smart Wizard -->
                            <div id="wizard" class="form_wizard wizard_horizontal">
                                <ul class="wizard_steps">
                                    <li>
                                        <a href="#step-1">
                                            <span class="step_no">1</span>
                                            <span class="step_descr">
                                                Step 1<br />
                                                <small>Official Details</small>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#step-2">
                                            <span class="step_no">2</span>
                                            <span class="step_descr">
                                                Step 2<br />
                                                <small>Personal Details</small>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#step-3">
                                            <span class="step_no">3</span>
                                            <span class="step_descr">
                                                Step 3<br />
                                                <small>Contact Details</small>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#step-4">
                                            <span class="step_no">4</span>
                                            <span class="step_descr">
                                                Step 4<br />
                                                <small>Education Details</small>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#step-5">
                                            <span class="step_no">5</span>
                                            <span class="step_descr">
                                                Step 5<br />
                                                <small>Work Experience Details</small>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#step-6">
                                            <span class="step_no">6</span>
                                            <span class="step_descr">
                                                Step 6<br />
                                                <small>Upload Documents</small>
                                            </span>
                                        </a>
                                    </li>
                                </ul>
                                <div id="step-1">
                                    <h2 class="StepTitle">Step 1 Official Details</h2>
                                    <div id="candidateForm1" data-parsley-validate class="form-horizontal form-label-left">
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3">Branch <span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.DropDownListFor(model => model.BRANCH_CODE, ViewData["GetBranch"] as SelectList, "Select Branch", new { @id = "BRANCH_CODE", @class = "form-control", @autocomplete = "off" })
                                                @Html.ValidationMessageFor(model => model.BRANCH_CODE, "", new { @class = "text-danger", @id = "ErrItem_BRANCH_CODE" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3">Source <span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.DropDownListFor(model => model.SOURCE_ID, ViewData["GetSource"] as SelectList, "Select Source", new { @id = "SOURCE_ID", @class = "form-control", @autocomplete = "off" })
                                                @Html.ValidationMessageFor(model => model.SOURCE_ID, "", new { @class = "text-danger", @id = "ErrItem_SOURCE_ID" })
                                                <div id="divOtherSource" style="display:none;margin-top: 10px;">
                                                    @Html.DropDownListFor(model => model.OTHER_SOURCE, new SelectList(""), "Select Source", new { @id = "OTHER_SOURCE", @class = "form-control", @style = "width:100%;", @autocomplete = "off" })
                                                </div>
                                                <div id="divReferrer" style="display:none;margin-top: 10px;">
                                                    @Html.TextBoxFor(model => model.REFERRER_NAME, new { @id = "REFERRER_NAME", @class = "form-control", @placeholder = "Referrer Name", @autocomplete = "off", @maxlength = "20" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3">Status <span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.DropDownListFor(model => model.STATUS_ID, ViewData["GetStatus"] as SelectList, "Select Status", new { @id = "STATUS_ID", @class = "form-control", @autocomplete = "off" })
                                                @Html.ValidationMessageFor(model => model.STATUS_ID, "", new { @class = "text-danger", @id = "ErrItem_STATUS_ID" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3">Login Access </label>
                                            <div class="col-md-6 col-sm-6">
                                                @{
                                                    List<SelectListItem> listLoginAccess = new List<SelectListItem>();
                                                    listLoginAccess.Add(new SelectListItem
                                                    {
                                                        Text = "Yes",
                                                        Value = "Yes"
                                                    });
                                                    listLoginAccess.Add(new SelectListItem
                                                    {
                                                        Text = "No",
                                                        Value = "No"
                                                    });
                                                }
                                                @Html.DropDownListFor(model => model.LOGIN_ACCESS, new SelectList(listLoginAccess, "Value", "Text", "No"), "--Select Login Access--", new { @id = "LOGIN_ACCESS", @class = "form-control", @autocomplete = "off", @disabled = "disabled" })
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div id="step-2">
                                    <h2 class="StepTitle">Step 2 Personal Details</h2>
                                    <div class="col-md-12" style="margin-top:10px">
                                        <div class="col-md-9">
                                            <div id="candidateForm2" data-parsley-validate class="form-horizontal form-label-left">
                                                <div class="form-group">
                                                    <label for="middle-name" class="control-label col-md-4 col-sm-4">Full Name  <span class="required">*</span></label>
                                                    <div class="col-md-3 col-sm-3">
                                                        @Html.TextBoxFor(model => model.FIRST_NAME, new { @id = "FIRST_NAME", @class = "form-control col-md-7 col-xs-12", @placeholder = "First Name", @autocomplete = "off", @maxlength = "50" })
                                                        @Html.ValidationMessageFor(model => model.FIRST_NAME, "", new { @class = "text-danger", @id = "ErrItem_FIRST_NAME" })
                                                    </div>
                                                    <div class="col-md-2 col-sm-2">
                                                        @Html.TextBoxFor(model => model.MIDDLE_NAME, new { @id = "MIDDLE_NAME", @class = "form-control col-md-7 col-xs-12", @placeholder = "Middle Name", @autocomplete = "off", @maxlength = "50" })
                                                    </div>
                                                    <div class="col-md-3 col-sm-3">
                                                        @Html.TextBoxFor(model => model.LAST_NAME, new { @id = "LAST_NAME", @class = "form-control col-md-7 col-xs-12", @placeholder = "Last Name", @autocomplete = "off", @maxlength = "50" })
                                                        @Html.ValidationMessageFor(model => model.LAST_NAME, "", new { @class = "text-danger", @id = "ErrItem_LAST_NAME" })
                                                    </div>


                                                </div>
                                                <div class="form-group">
                                                    <label for="middle-name" class="control-label col-md-4 col-sm-4">Father Name</label>
                                                    <div class="col-md-8 col-sm-8">
                                                        @Html.TextBoxFor(model => model.FATHER_NAME, new { @id = "FATHER_NAME", @class = "form-control col-md-7 col-xs-12", @placeholder = "Father Name", @autocomplete = "off", @maxlength = "80" })
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="middle-name" class="control-label col-md-4 col-sm-4">Mother Name</label>
                                                    <div class="col-md-8 col-sm-8">
                                                        @Html.TextBoxFor(model => model.MOTHER_NAME, new { @id = "MOTHER_NAME", @class = "form-control col-md-7 col-xs-12", @placeholder = "Mother Name", @autocomplete = "off", @maxlength = "80" })
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-4 col-sm-4">Gender <span class="required">*</span>  </label>
                                                    <div class="col-md-6 col-sm-6">
                                                        @Html.DropDownListFor(model => model.GENDER_CODE, ViewData["GetGender"] as SelectList, "Select Gender", new { @id = "GENDER_CODE", @class = "form-control", @autocomplete = "off" })
                                                        @Html.ValidationMessageFor(model => model.GENDER_CODE, "", new { @class = "text-danger", @id = "ErrItem_GENDER_CODE" })
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-4 col-sm-4" for="contactPerson">Date of Birth <span class="required">*</span> </label>
                                                    <div class="col-md-8 col-sm-8">
                                                        @Html.TextBoxFor(model => model.DATE_OF_BIRTH, new { @id = "DATE_OF_BIRTH", @class = "form-control", @placeholder = "Date of Birth", @autocomplete = "off", @maxlength = "20" })
                                                        @Html.ValidationMessageFor(model => model.DATE_OF_BIRTH, "", new { @class = "text-danger", @id = "ErrItem_DATE_OF_BIRTH" })
                                                        <span id="textBoxName"></span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-4 col-sm-4">Place of Birth <span class="required">*</span></label>
                                                    <div class="col-md-8 col-sm-8">
                                                        @Html.TextBoxFor(model => model.PLACE_OF_BIRTH, new { @id = "PLACE_OF_BIRTH", @class = "form-control", @placeholder = "Place of Birth", @autocomplete = "off", @maxlength = "50" })
                                                        @Html.ValidationMessageFor(model => model.PLACE_OF_BIRTH, "", new { @class = "text-danger", @id = "ErrItem_PLACE_OF_BIRTH" })
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-4 col-sm-4">Martial Status</label>
                                                    <div class="col-md-8 col-sm-8">
                                                        @Html.DropDownListFor(model => model.MARITAL_STATUS_ID, ViewData["GetMaritalStatus"] as SelectList, "Select Marital Status", new { @id = "MARITAL_STATUS_ID", @class = "form-control", @autocomplete = "off" })

                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-4 col-sm-4">Nationality <span class="required">*</span></label>
                                                    <div class="col-md-8 col-sm-8">
                                                        @Html.DropDownListFor(model => model.NATIONALITY_ID, ViewData["GetNationality"] as SelectList, "Select Nationality", new { @id = "NATIONALITY_ID", @class = "form-control", @autocomplete = "off" })
                                                        @Html.ValidationMessageFor(model => model.NATIONALITY_ID, "", new { @class = "text-danger", @id = "ErrItem_NATIONALITY_ID" })
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-4 col-sm-4">Current Location <span class="required">*</span></label>
                                                    <div class="col-md-8 col-sm-8">
                                                        @Html.DropDownListFor(model => model.CURRENT_LOCATION, ViewData["GetLocation"] as SelectList, "Select Current Location", new { @id = "CURRENT_LOCATION", @class = "form-control", @autocomplete = "off" })
                                                        @Html.ValidationMessageFor(model => model.CURRENT_LOCATION, "", new { @class = "text-danger", @id = "ErrItem_CURRENT_LOCATION" })
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-4 col-sm-4">Religion<span class="required">*</span></label>
                                                    <div class="col-md-8 col-sm-8">
                                                        @Html.DropDownListFor(model => model.RELIGION_ID, ViewData["GetReligion"] as SelectList, "Select Religion", new { @id = "RELIGION_ID", @class = "form-control", @autocomplete = "off" })
                                                        @Html.ValidationMessageFor(model => model.RELIGION_ID, "", new { @class = "text-danger" })
                                                        @Html.ValidationMessageFor(model => model.RELIGION_ID, "", new { @class = "text-danger", @id = "ErrItem_RELIGION_ID" })
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="fileinput fileinput-new" data-provides="fileinput">
                                                <div class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 200px; height: 150px;"></div>
                                                <div>
                                                    <span class="btn btn-default btn-file"><span class="fileinput-new">Select image</span><span class="fileinput-exists">Change</span><input type="file" name="fileupload" id="SaveImage"></span>
                                                    <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
                                                </div>
                                            </div>
                                            @Html.HiddenFor(model => model.FILE_PATH)

                                        </div>
                                    </div>

                                </div>
                                <div id="step-3">
                                    <h2 class="StepTitle">Step 3 Contact Details</h2>
                                    <div id="candidateForm3" class="form-horizontal form-label-left">
                                        @Html.Partial("~/Views/Shared/_Address.cshtml")
                                        @Html.Partial("~/Views/Shared/_Contact.cshtml")
                                        @Html.Partial("~/Views/Shared/_Email.cshtml")

                                        <div class="form-group">
                                            <label for="middle-name" class="control-label col-md-3 col-sm-3">Website</label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.TextBoxFor(model => model.WEBSITE, new { @id = "WEBSITE", @class = " form-control col-md-7 col-xs-12", @placeholder = "Website", @autocomplete = "off" })

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="middle-name" class="control-label col-md-3 col-sm-3">Skype</label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.TextBoxFor(model => model.SKYPE, new { @id = "SKYPE", @class = " form-control col-md-7 col-xs-12", @placeholder = "Skype", @autocomplete = "off" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3">Remark</label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.TextAreaFor(model => model.CONTACT_REMARK, new { @id = "CONTACT_REMARK", @class = " form-control col-md-7 col-xs-12", @placeholder = "Remark", @autocomplete = "off" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="step-4">
                                    <h2 class="StepTitle">Step 4 Educational Details</h2>
                                    <div id="candidateForm4" data-parsley-validate class="form-horizontal form-label-left">

                                        @Html.Partial("~/Views/Shared/_Education.cshtml")
                                        @Html.Partial("~/Views/Shared/_Certification.cshtml")

                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3">Remark</label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.TextBoxFor(model => model.EDUCATION_REMARK, new { @id = "EDUCATION_REMARK", @class = "date-picker form-control col-md-7 col-xs-12", @placeholder = "Remark", @autocomplete = "off" })

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="step-5">
                                    <h2 class="StepTitle">Step 5 Work Experience Details</h2>
                                    <div id="candidateForm5" data-parsley-validate class="form-horizontal form-label-left">
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3">Career Status</label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <div class="btn-group" data-toggle="buttons" id="isExp">
                                                    <label class="btn btn-default active">

                                                        <input type="radio" name="careerstatus" id="Experience" class="exp_careerstatus" value="true" checked="checked">
                                                        Experienced
                                                    </label>
                                                    <label class="btn btn-default">
                                                        <input type="radio" name="careerstatus" class="exp_careerstatus" id="Fresher" value="false">
                                                        Fresher
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        @Html.Partial("~/Views/Shared/_Experience.cshtml")

                                        <div class="form-group career ">
                                            <label class="control-label col-md-3 col-sm-3">Total Work Experience</label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.TextBoxFor(model => model.TOTAL_WORK_EXPERIENCE, new { @id = "TOTAL_WORK_EXPERIENCE", @class = "form-control", @placeholder = "Total Work Experience", @autocomplete = "off", @readonly = "readonly" })
                                            </div>
                                        </div>


                                        <div class="form-group career">
                                            <label class="control-label col-md-3 col-sm-3">Total Gulf Experience</label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.TextBoxFor(model => model.TOTAL_GULF_EXPERIENCE, new { @id = "TOTAL_GULF_EXPERIENCE", @class = "form-control", @placeholder = "Total Gulf Experiemce", @autocomplete = "off", @readonly = "readonly" })
                                            </div>,
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3">Skills</label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.TextBoxFor(model => model.SKILLS, new { @id = "SKILLS", @class = "form-control", @placeholder = "Skills", @autocomplete = "off" })

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3">Remark</label>
                                            <div class="col-md-6 col-sm-6">
                                                @Html.TextAreaFor(model => model.WORK_REMARK, new { @id = "WORK_REMARK", @class = "form-control", @placeholder = "Remark", @autocomplete = "off" })

                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div id="step-6">
                                    <h2 class="StepTitle">Step 6 Upload Documents</h2>
                                    <div id="candidateForm6" data-parsley-validate class="form-horizontal form-label-left">
                                        @Html.Partial("~/Views/Shared/_Document.cshtml")
                                    </div>
                                </div>

                                @Html.HiddenFor(model => model.USER_TYPE_ID)
                            </div>
                            <!-- End SmartWizard Content -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- /page content -->
                                                    }
@*For Progress Bar*@
<div id="progressBar" style="margin: 0px; padding: 0px; position: fixed; right: 0px;
                top: 0px; width: 100%; height: 100%; background-color: #666666; z-index: 30001;
                opacity: .8; filter: alpha(opacity=70);display:none">
    <p style="position: fixed; top: 20%; left: 30%; color: White;">
        <img src="@Url.Content("~/Content/img/please_wait.gif")">
    </p>
</div>
@*For Progress Bar [end]*@

<script type="text/javascript">

    var addressCollection = new Array();
    var contactCollection = new Array();
    var emailCollection = new Array();
    var educationCollection = new Array();
    var certificationCollection = new Array();
    var experienceCollection = new Array();
    var documentCollection = new Array();
    var languageCollection = new Array();

    $(document).ready(function () {

        //Set Default value
        $("#NATIONALITY_ID").val('1');
        $("#STATUS_ID").val('1');

        $("#LOGIN_ACCESS").chosen();
        $("#GENDER_CODE").chosen();
        $("#MARITAL_STATUS_ID").chosen();
        $("#NATIONALITY_ID").chosen();
        $("#CURRENT_LOCATION").chosen();
        $("#RELIGION_ID").chosen();
        $("#BRANCH_CODE").chosen();
        $("#SOURCE_ID").chosen();
        $("#STATUS_ID").chosen();
        $("#OTHER_SOURCE").chosen();

        var source = $("#SOURCE_ID").val();
        if (source == "5" || source == "8") {
            $("#divReferrer").css("display", "block");
            $("#divOtherSource").css("display", "none");
        }
        else if (source == "2" || source == "3" || source == "4" || source == "6") {
            $("#divOtherSource").css("display", "block");
            $("#divReferrer").css("display", "none");
            $("#OTHER_SOURCE").attr("width", "100%");
        }
        else {
            $("#divReferrer").css("display", "none");
            $("#divOtherSource").css("display", "none");
        }


        //Initialise Datepicker
        $("#DATE_OF_BIRTH").datepicker({
            maxDate: "-1D",
            dateFormat: "dd/mm/yy",
            changeMonth: true,
            changeYear: true, yearRange: "-70:+0",
        });


        $("#WORK_PERIOD_FROM").datepicker({
            maxDate: "-1D",
            changeMonth: true,
            changeYear: true, yearRange: "-70:+0",
            numberOfMonths: 2,
            dateFormat: "dd/mm/yy",
            onClose: function (selectedDate) {
                $("#WORK_PERIOD_TO").datepicker("option", "minDate", selectedDate);
            }
        });
        $("#WORK_PERIOD_TO").datepicker({
            maxDate: "D",
            changeMonth: true,
            changeYear: true, yearRange: "-70:+10",
            numberOfMonths: 2,
            dateFormat: "dd/mm/yy",
            onClose: function (selectedDate) {
                $("#WORK_PERIOD_FROM").datepicker("option", "maxDate", selectedDate);
            }
        });


        $('#wizard').smartWizard({
            keyNavigation: false,
            onLeaveStep: leaveAStepCallback,
            onFinish: onFinishCallback
        });

        function leaveAStepCallback(obj, context) {
            return validateSteps(context.fromStep, context.toStep); // return false to stay on step and true to continue navigation
        }

        function onFinishCallback(objs, context) {
            if (validateAllSteps()) {

                var addressHtml = "";
                var counter = 0;

                var urlLink = '@Url.Action("Create", "Candidate")';

                var formdata = JSON.stringify({
                    "LST_USER_ADDRESS": addressCollection,
                    "LST_USER_CONTACT": contactCollection,
                    "LST_USER_EMAIL": emailCollection,
                    "LST_USER_EDUCATION": educationCollection,
                    "LST_USER_CERTIFICATION": certificationCollection,
                    "LST_USER_EXPERIENCE": experienceCollection,
                    "LST_USER_DOCUMENT": documentCollection,

                    "BRANCH_CODE": $("#BRANCH_CODE").val(),
                    "SOURCE_ID": $("#SOURCE_ID").val(),
                    "OTHER_SOURCE": $("#OTHER_SOURCE").val(),
                    "REFERRER_NAME": $("#REFERRER_NAME").val(),
                    "STATUS_ID": $("#STATUS_ID").val(),
                    "IS_EXPERIENCED": $('input[name=careerstatus]:checked').val(),
                    "EDUCATION_REMARK": $("#EDUCATION_REMARK").val(),
                    "WORK_REMARK": $("#WORK_REMARK").val(),

                    "TOTAL_WORK_EXPERIENCE": $("#TOTAL_WORK_EXPERIENCE").val(),
                    "TOTAL_GULF_EXPERIENCE": $("#TOTAL_GULF_EXPERIENCE").val(),
                    "SKILLS": $("#SKILLS").val(),
                    "FIRST_NAME": $("#FIRST_NAME").val(),
                    "MIDDLE_NAME": $("#MIDDLE_NAME").val(),
                    "LAST_NAME": $("#LAST_NAME").val(),
                    "FILE_PATH": $("#FILE_PATH").val(),
                    "WEBSITE": $("#WEBSITE").val(),

                    "SKYPE": $("#SKYPE").val(),
                    "CONTACT_REMARK": $("#CONTACT_REMARK").val(),
                    "FATHER_NAME": $("#FATHER_NAME").val(),
                    "MOTHER_NAME": $("#MOTHER_NAME").val(),
                    "GENDER_CODE": $("#GENDER_CODE").val(),
                    "DATE_OF_BIRTH": $("#DATE_OF_BIRTH").val(),
                    "PLACE_OF_BIRTH": $("#PLACE_OF_BIRTH").val(),
                    "MARITAL_STATUS_ID": $("#MARITAL_STATUS_ID").val(),
                    "NATIONALITY_ID": $("#NATIONALITY_ID").val(),
                    "CURRENT_LOCATION": $("#CURRENT_LOCATION").val(),
                    "RELIGION_ID": $("#RELIGION_ID").val(),
                    "USER_TYPE_ID": $("#USER_TYPE_ID").val()
                });

                $.ajax({
                    contentType: "application/json",
                    type: 'POST',
                    url: urlLink,
                    traditional: true,
                    data: formdata,
                    dataType: "json",
                    async: true,
                    success: function (d) {
                        if (d == "SessionTimeout") {
                            window.location.href = '@Url.Action("LogOut", "Login")';
                        }
                        $('#progressBar').hide();
                        window.location.href = '@Url.Action("Create", "Candidate")' + '?id=' + d.USER_TYPE_ID + '&RegNo=' + d.regno;
                    },
                    error: function (ex) {
                        $('#progressBar').hide();
                    }
                });
                return false;


            }
        }

        // Your Step validation logic
        function validateSteps(stepnumber, toStep) {
            var isStepValid = true;
            if (stepnumber > toStep)
                return isStepValid;
            // validate step 1
            if (stepnumber == 1) {
                // Your step validation logic
                // set isStepValid = false if has errors

                var branch = $("#BRANCH_CODE").val();
                if (branch == "") {
                    $("#ErrItem_BRANCH_CODE").text("Please select Branch");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_BRANCH_CODE").text("");
                }

                var source = $("#SOURCE_ID").val();
                if (source == "" || source == "0") {
                    $("#ErrItem_SOURCE_ID").text("Please select Source");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_SOURCE_ID").text("");
                }

                var status = $("#STATUS_ID").val();
                if (status == "") {
                    $("#ErrItem_STATUS_ID").text("Please select Status");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_STATUS_ID").text("");
                }

                return isStepValid;
            }
            else if (stepnumber == 2) {

                var firstname = $("#FIRST_NAME").val();
                if (firstname == "") {
                    $("#ErrItem_FIRST_NAME").text("Please enter First Name");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_FIRST_NAME").text("");
                }

                var lastname = $("#LAST_NAME").val();
                if (lastname == "") {
                    $("#ErrItem_LAST_NAME").text("Please enter Last Name");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_LAST_NAME").text("");
                }

                var gender = $("#GENDER_CODE").val();
                if (gender == "") {
                    $("#ErrItem_GENDER_CODE").text("Please select Gender");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_GENDER_CODE").text("");
                }

                var dob = $("#DATE_OF_BIRTH").val();
                if (dob == "") {
                    $("#ErrItem_DATE_OF_BIRTH").text("Please enter Date of Birth");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_DATE_OF_BIRTH").text("");
                }

                var pob = $("#PLACE_OF_BIRTH").val();
                if (pob == "") {
                    $("#ErrItem_PLACE_OF_BIRTH").text("Please enter Place of Birth");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_PLACE_OF_BIRTH").text("");
                }

                var nationality = $("#NATIONALITY_ID").val();
                if (nationality == "") {
                    $("#ErrItem_NATIONALITY_ID").text("Please select Nationality");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_NATIONALITY_ID").text("");
                }

                var location = $("#CURRENT_LOCATION").val();
                if (location == "") {
                    $("#ErrItem_CURRENT_LOCATION").text("Please select Location");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_CURRENT_LOCATION").text("");
                }

                var religion = $("#RELIGION_ID").val();
                if (religion == "") {
                    $("#ErrItem_RELIGION_ID").text("Please select Religion");
                    isStepValid = false;
                }
                else {
                    $("#ErrItem_RELIGION_ID").text("");
                }

                return isStepValid;
            }

            else if (stepnumber == 3) {
                var tbladdresscount = $('#tblchild').children().length;
                if (tbladdresscount < 1) {
                    $("#Err_ADDRESS_TYPE_ID").text("Please select Address Type");
                    $("#Err_ADDRESS").text("Please enter Address details");
                    $("#Err_COUNTRY_CODE").text("Please select Country");
                    $("#Err_STATE_CODE").text("Please select State");
                    $("#Err_CITY_CODE").text("Please select City");
                    $("#Err_USER_PINCODE").text("Please enter Pin Code");
                    isStepValid = false;
                }

                var tblcontactcount = $('#tblcontact').children().length;
                if (tblcontactcount < 1) {
                    $("#Err_CONTACT_TYPE_ID").text("Please select Contact Type");
                    $("#Err_CONTACT_NO").text("Please enter Contact no.");
                    isStepValid = false;
                }
                return isStepValid;

            }
            return isStepValid;
            // ...
        }
        function validateAllSteps() {
            var isStepValid = true;

            // all step validation logic

            var branch = $("#BRANCH_CODE").val();
            if (branch == "") {
                $("#ErrItem_BRANCH_CODE").text("Please select Branch");
                isStepValid = false;
            }
            else {
                $("#ErrItem_BRANCH_CODE").text("");
            }

            var source = $("#SOURCE_ID").val();
            if (source == "") {
                $("#ErrItem_SOURCE_ID").text("Please select Source");
                isStepValid = false;
            }
            else {
                $("#ErrItem_SOURCE_ID").text("");
            }

            var status = $("#STATUS_ID").val();
            if (status == "") {
                $("#ErrItem_STATUS_ID").text("Please select Status");
                isStepValid = false;
            }
            else {
                $("#ErrItem_STATUS_ID").text("");
            }

            var firstname = $("#FIRST_NAME").val();
            if (firstname == "") {
                $("#ErrItem_FIRST_NAME").text("Please enter First Name");
                isStepValid = false;
            }
            else {
                $("#ErrItem_FIRST_NAME").text("");
            }

            var lastname = $("#LAST_NAME").val();
            if (lastname == "") {
                $("#ErrItem_LAST_NAME").text("Please enter Last Name");
                isStepValid = false;
            }
            else {
                $("#ErrItem_LAST_NAME").text("");
            }

            var gender = $("#GENDER_CODE").val();
            if (gender == "") {
                $("#ErrItem_GENDER_CODE").text("Please select Gender");
                isStepValid = false;
            }
            else {
                $("#ErrItem_GENDER_CODE").text("");
            }

            var dob = $("#DATE_OF_BIRTH").val();
            if (dob == "") {
                $("#ErrItem_DATE_OF_BIRTH").text("Please enter Date of Birth");
                isStepValid = false;
            }
            else {
                $("#ErrItem_DATE_OF_BIRTH").text("");
            }

            var pob = $("#PLACE_OF_BIRTH").val();
            if (pob == "") {
                $("#ErrItem_PLACE_OF_BIRTH").text("Please enter Place of Birth");
                isStepValid = false;
            }
            else {
                $("#ErrItem_PLACE_OF_BIRTH").text("");
            }

            var nationality = $("#NATIONALITY_ID").val();
            if (nationality == "") {
                $("#ErrItem_NATIONALITY_ID").text("Please select Nationality");
                isStepValid = false;
            }
            else {
                $("#ErrItem_NATIONALITY_ID").text("");
            }

            var location = $("#CURRENT_LOCATION").val();
            if (location == "") {
                $("#ErrItem_CURRENT_LOCATION").text("Please select Location");
                isStepValid = false;
            }
            else {
                $("#ErrItem_CURRENT_LOCATION").text("");
            }

            var religion = $("#RELIGION_ID").val();
            if (religion == "") {
                $("#ErrItem_RELIGION_ID").text("Please select Religion");
                isStepValid = false;
            }
            else {
                $("#ErrItem_RELIGION_ID").text("");
            }

            var tbladdresscount = $('#tblchild').children().length;
            if (tbladdresscount < 1) {
                $("#Err_ADDRESS_TYPE_ID").text("Please select Address Type");
                $("#Err_ADDRESS").text("Please enter Address details");
                $("#Err_COUNTRY_CODE").text("Please select Country");
                $("#Err_STATE_CODE").text("Please select State");
                $("#Err_CITY_CODE").text("Please select City");
                $("#Err_USER_PINCODE").text("Please enter Pin Code");
                isStepValid = false;
            }

            var tblcontactcount = $('#tblcontact').children().length;
            if (tblcontactcount < 1) {
                $("#Err_CONTACT_TYPE_ID").text("Please select Contact Type");
                $("#Err_CONTACT_NO").text("Please enter Contact no.");
                isStepValid = false;
            }
            return isStepValid;
        }

        //GetSource
        $("#AVAILING_TYPE_ID").change(function (e) {
            var isSessionActive = '@HttpContext.Current.Session["Userdetails"]';
            if (isSessionActive == null) {
                window.location.href = '@Url.Action("Index", "Login")';
                return false;
            }
            $("#SOURCE_ID").empty();
            $.ajax({
                type: 'POST',
                url: '@Url.Action("GetSourceByAvailingType")', // we are calling json method
                dataType: 'json',
                data: { availTypeID: $("#AVAILING_TYPE_ID").val() },
                async: true,
                success: function (states) {
                    if (states == "SessionTimeout") {
                        window.location.href = '@Url.Action("LogOut", "Login")';
                    }
                    $("#SOURCE_ID").append('<option value="0">--Select Source--</option>');
                    $.each(states.selectList, function (i, state) {
                        $("#SOURCE_ID").append('<option value="' + state.Value + '">' + state.Text + '</option>');
                    });
                    $("#SOURCE_ID").trigger("chosen:updated");
                },
                error: function (ex) {
                    $("#SOURCE_ID").append('<option >--Select Source--</option>');
                }
            });
            return false;
        });

        //GetOtherSource
        $("#SOURCE_ID").change(function (e) {
            if (isSessionActive == null) {
                window.location.href = '@Url.Action("Index", "Login")';
                return false;
            }
            $("#divReferrer").css("display", "none");
            $("#divOtherSource").css("display", "none");
            var source = $("#SOURCE_ID").val();
            if (source == "5" || source == "8") {
                $("#divReferrer").css("display", "block");
                $("#divOtherSource").css("display", "none");
            }
            else if (source == "2" || source == "3" || source == "4" || source == "6") {
                $("#divOtherSource").css("display", "block");
                $("#divReferrer").css("display", "none");
                $("#OTHER_SOURCE").empty();
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("GetOtherSourceBySource")', // we are calling json method
                    dataType: 'json',
                    data: { sourceId: $("#SOURCE_ID").val() },
                    async: true,
                    success: function (states) {
                        if (states == "SessionTimeout") {
                            window.location.href = '@Url.Action("LogOut", "Login")';
                        }
                        $("#OTHER_SOURCE").append('<option value="0">--Select Other Source--</option>');
                        $.each(states.selectList, function (i, state) {
                            $("#OTHER_SOURCE").append('<option value="' + state.Value + '">' + state.Text + '</option>');
                        }); // here we are adding option for States
                        $("#OTHER_SOURCE").trigger("chosen:updated");
                    },
                    error: function (ex) {
                        $("#OTHER_SOURCE").append('<option >--Select Other Source--</option>');
                    }
                });
                return false;
            }
        });

        $("#SaveImage").change(function (e) {
            var file = e.target.files;
            var path = UploadAttachment(file, "Employee");
        });

        function UploadAttachment(file, uploadFrom) {
            var path = "";
            if (file.length > 0) {
                var isvalid = checkImagefile(file);
                if (isvalid) {
                    var data = new FormData();

                    // Add the uploaded image content to the form data collection
                    data.append("UploadedImage", file[0]);
                    data.append("UploadFrom", uploadFrom);

                    // Make Ajax request with the contentType = false, and procesDate = false
                    var ajaxRequest = $.ajax({
                        type: "POST",
                        url: '@Url.Action("UploadImageFile", "StatusSearch")',
                        contentType: false,
                        processData: false,
                        data: data
                    });

                    ajaxRequest.done(function (xhr, textStatus) {
                        if (xhr == "SessionTimeout") {
                            window.location.href = '@Url.Action("LogOut", "Login")';
                        }
                        // Do other operation
                        path = xhr;
                        $("#FILE_PATH").val(path);
                    });
                }
            }
            else {
                path = "";
                $("#FILE_PATH").val(path);
            }
        }

    });

</script>